#!/bin/sh

set -u
set -e

# Check if docker and docker-compose are available on trhe system
command -v docker >/dev/null 2>&1 || { echo "docker is not installed. Aborting." >&2; exit 1; }
command -v docker-compose >/dev/null 2>&1 || { echo "docker-compose is not installed. Aborting." >&2; exit 1; }

source "./.env"

# Output colors
NORMAL="\\033[0;39m"
BLUE="\\033[1;34m"

# Show a list of commands
help() {
    echo "-----------------------------------------------------------------------"
    echo "Available commands                                                    -"
    echo "-----------------------------------------------------------------------"
    typeset -f | awk '/ \(\) $/ && !/^log / {print $1}'        
    echo "-----------------------------------------------------------------------"
}

# Show log message
log() {
    echo "${HOSTNAME} | $BLUE > $1 $NORMAL"
}

# Import additional shell scripts
if [ -d ./bin/custom ]; then
  for file in ./bin/custom/*.sh; do
    source "$file"
  done
fi

$*